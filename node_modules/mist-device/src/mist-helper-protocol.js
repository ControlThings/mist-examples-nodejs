var Application = require('./mist-helper-application.js').Application;
var UcpProtocol = require('./ucp-protocol.js').UcpProtocol;

function MistHelperProtocol(model, device, service) {
    if (typeof model.model.mist.name !== 'string') {
        console.log("MistDevice: Mist model requires `mist.name` to be string");
        process.exit(0);
    }
    this.application = new Application(service, model, device);
    this.protocol = new UcpProtocol();
    //this.omiParser = new OmiProtocol();
    //this.application.ucpDevice.attachInterface(this.omiParser);
    //this.application.ucpDevice.attachInterface(this.protocol);
}


MistHelperProtocol.prototype.attachInterface = function(service) {
    this.application.attachInterface(service);
};


module.exports = {
    MistHelperProtocol: MistHelperProtocol };

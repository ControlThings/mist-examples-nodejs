var UnitTestService = require('../test/support/unit-test-service.js').UnitTestService;
var WishCore = require('wish-core').WishCore;
var assert = require('assert');
var debug = require('debug')('doc');

var core; 

WishCore({nonwk: true}, function(wishCore) {
    core = wishCore;
    var descriptor = {
        name: 'Basic Service',
        wsid: 'basic',
        core: {api: core.rpc.invoke.bind(core.rpc)},
        configFile: 'app-config.json'
    };

    listServiceApi(descriptor);
});

function listServiceApi(descriptor) {
    var unitTestService = new UnitTestService(descriptor);

    unitTestService.app.rpc.invoke('methods', [], function(data) {
        console.log("Service API:");
        for (var i in data) {
            console.log("• "+data[i].fullname);
        }
        console.log();
    });

    unitTestService.app.rpc.invoke('unit.list', [], function(data) {
        data = data.data;
        console.log("Core API:");
        for (var i in data) {
            console.log("• "+data[i].fullname);
        }
        console.log();
    });
}
    